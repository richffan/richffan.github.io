# ç¬¬ä¸‰ç«  é«˜çº§ç‰¹æ€§


æŽŒæ¡äº† Python çš„æ•°æ®ç±»åž‹ã€è¯­å¥å’Œå‡½æ•°ï¼ŒåŸºæœ¬ä¸Šå°±å¯ä»¥ç¼–å†™å‡ºå¾ˆå¤šæœ‰ç”¨çš„ç¨‹åºäº†ã€‚

æ¯”å¦‚æž„é€ ä¸€ä¸ª`1, 3, 5, 7, ..., 99`çš„åˆ—è¡¨ï¼Œå¯ä»¥é€šè¿‡å¾ªçŽ¯å®žçŽ°ï¼š

```python
L = []
n = 1
while n &lt;= 99:
    L.append(n)
    n = n &#43; 2
print(L)
```

ðŸ” ä½¿ç”¨**åˆ—è¡¨ç”Ÿæˆå¼**ï¼Œæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š

```python
list = [i for i in range(1,101,2)]
print(list)
```

å– list çš„å‰ä¸€åŠçš„å…ƒç´ ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¾ªçŽ¯å®žçŽ°ã€‚

ä½†æ˜¯åœ¨ Python ä¸­ï¼Œä»£ç ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œè€Œæ˜¯è¶Šå°‘è¶Šå¥½ã€‚ä»£ç ä¸æ˜¯è¶Šå¤æ‚è¶Šå¥½ï¼Œè€Œæ˜¯è¶Šç®€å•è¶Šå¥½ã€‚

åŸºäºŽè¿™ä¸€æ€æƒ³ï¼Œæˆ‘ä»¬æ¥ä»‹ç» Python ä¸­éžå¸¸æœ‰ç”¨çš„é«˜çº§ç‰¹æ€§ï¼Œ**1 è¡Œä»£ç èƒ½å®žçŽ°çš„åŠŸèƒ½ï¼Œå†³ä¸å†™ 5 è¡Œä»£ç ã€‚**è¯·å§‹ç»ˆç‰¢è®°ï¼Œä»£ç è¶Šå°‘ï¼Œå¼€å‘æ•ˆçŽ‡è¶Šé«˜ã€‚

## 3.1 åˆ‡ç‰‡

### 3.1.1 list åˆ‡ç‰‡

å–ä¸€ä¸ª list æˆ– tuple çš„éƒ¨åˆ†å…ƒç´ æ˜¯éžå¸¸å¸¸è§çš„æ“ä½œã€‚æ¯”å¦‚ï¼Œä¸€ä¸ª list å¦‚ä¸‹ï¼š

```python
L = [&#39;Michael&#39;, &#39;Sarah&#39;, &#39;Tracy&#39;, &#39;Bob&#39;, &#39;Jack&#39;]
```

å–å‰ 3 ä¸ªå…ƒç´ ï¼Œåº”è¯¥æ€Žä¹ˆåšï¼Ÿ

å¯èƒ½ä¼šåƒè¿™æ ·è§£å†³ï¼š

```python
[L[0],L[1],L[2]]
```

![image-20200712160938388](https://gitee.com/wugenqiang/PictureBed/raw/master/NoteBook/20200712160939.png)

ä½†æ˜¯ï¼Œå¦‚æžœæ˜¯å–å‰ N ä¸ªå…ƒç´ å°±æ²¡è¾™äº†ã€‚

ðŸŽ å–å‰ N ä¸ªå…ƒç´ ï¼Œä¹Ÿå°±æ˜¯ç´¢å¼•ä¸º 0-(N-1) çš„å…ƒç´ ï¼Œå¯ä»¥ç”¨å¾ªçŽ¯ï¼š

```python
r = []
n = 3
for i in range(n):
    r.append(L[i])
r
```

![image-20200712214348838](https://gitee.com/wugenqiang/PictureBed/raw/master/NoteBook/20200712214350.png)

å¯¹è¿™ç§ç»å¸¸å–æŒ‡å®šç´¢å¼•èŒƒå›´çš„æ“ä½œï¼Œç”¨å¾ªçŽ¯ååˆ†ç¹çï¼Œå› æ­¤ï¼ŒPython æä¾›äº†åˆ‡ç‰‡ï¼ˆSliceï¼‰æ“ä½œç¬¦ï¼Œèƒ½å¤§å¤§ç®€åŒ–è¿™ç§æ“ä½œã€‚

å¯¹åº”ä¸Šé¢çš„é—®é¢˜ï¼Œå–å‰ 3 ä¸ªå…ƒç´ ï¼Œç”¨ä¸€è¡Œä»£ç å°±å¯ä»¥å®Œæˆåˆ‡ç‰‡ï¼š

```python
L[0:3]
```

![image-20200712214632198](https://gitee.com/wugenqiang/PictureBed/raw/master/NoteBook/20200712214633.png)

 `L[0:3]`è¡¨ç¤ºï¼Œä»Žç´¢å¼•`0`å¼€å§‹å–ï¼Œç›´åˆ°ç´¢å¼•`3`ä¸ºæ­¢ï¼Œä½†ä¸åŒ…æ‹¬ç´¢å¼•`3`ã€‚å³ç´¢å¼•`0`ï¼Œ`1`ï¼Œ`2`ï¼Œæ­£å¥½æ˜¯ 3 ä¸ªå…ƒç´ ã€‚

å¦‚æžœç¬¬ä¸€ä¸ªç´¢å¼•æ˜¯`0`ï¼Œè¿˜å¯ä»¥çœç•¥ï¼š

```python
L[:3]
```

ä¹Ÿå¯ä»¥ä»Žç´¢å¼• 1 å¼€å§‹ï¼Œå–å‡º 2 ä¸ªå…ƒç´ å‡ºæ¥ï¼š

```python
L[1:3]
```

ç±»ä¼¼çš„ï¼Œæ—¢ç„¶ Python æ”¯æŒ`L[-1]`å–å€’æ•°ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆå®ƒåŒæ ·æ”¯æŒå€’æ•°åˆ‡ç‰‡ï¼Œè¯•è¯•ï¼š

```python
 L[-2:]
```

![image-20200712220306806](https://gitee.com/wugenqiang/PictureBed/raw/master/NoteBook/20200712220307.png)

è®°ä½å€’æ•°ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•æ˜¯`-1`ã€‚

â­ åˆ‡ç‰‡æ ¼å¼ï¼š**[å¼€å¤´ï¼šç»“æŸï¼šæ­¥é•¿]**

- **å¼€å¤´**ï¼šå½“æ­¥é•¿ &gt;0 æ—¶ï¼Œå¼€å¤´ä¸å†™é»˜è®¤ 0ï¼Œå³ä»Žç¬¬ä¸€ä½å¼€å§‹åˆ‡ç‰‡

  å½“æ­¥é•¿ &lt; 0æ—¶ï¼Œå¼€å¤´ä¸å†™é»˜è®¤ -1 ï¼Œå³ä»Žæœ€åŽä¸€ä½å¼€å§‹å€’ç€åˆ‡ç‰‡

- **ç»“æŸ**ï¼šå½“æ­¥é•¿ &gt; 0 æ—¶ï¼Œç»“æŸä¸å†™é»˜è®¤ä¸ºåˆ—è¡¨é•¿åº¦åŠ ä¸€ï¼Œå³åˆ‡ç‰‡åˆ°æœ€åŽä¸€ä½ç»“æŸ

  å½“æ­¥é•¿ &lt; 0 æ—¶ï¼Œç»“æŸä¸å†™é»˜è®¤ä¸ºè´Ÿçš„åˆ—è¡¨é•¿åº¦å‡ä¸€ï¼Œå³å€’ç€åˆ‡ç‰‡åˆ°ç¬¬ä¸€ä½ç»“æŸ

- **æ­¥é•¿ï¼šé»˜è®¤ä¸º1ï¼Œ&gt; 0 æ˜¯ä»Žå·¦å¾€å³èµ°ï¼Œ&lt; 0 æ˜¯ä»Žå³å¾€å·¦èµ°**

ðŸ’¬ åˆ‡ç‰‡æ“ä½œååˆ†æœ‰ç”¨ã€‚æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ª 0 - 99 çš„æ•°åˆ—ï¼š

```python
L = list(range(100))
L
```

å¯ä»¥é€šè¿‡åˆ‡ç‰‡è½»æ¾å–å‡ºæŸä¸€æ®µæ•°åˆ—ã€‚æ¯”å¦‚å‰ 10 ä¸ªæ•°ï¼š

```python
L[:10]
```

![image-20200712220546937](https://gitee.com/wugenqiang/PictureBed/raw/master/NoteBook/20200712220548.png)

åŽ 10 ä¸ªæ•°ï¼š

```python
L[-10:]
```

å‰ 11 - 20 ä¸ªæ•°ï¼š

```python
L[10:20]
```

å‰ 10 ä¸ªæ•°ï¼Œæ¯ä¸¤ä¸ªå–ä¸€ä¸ªï¼š

```python
L[:10:2]
```

æ‰€æœ‰æ•°ï¼Œæ¯ 5 ä¸ªå–ä¸€ä¸ªï¼š

```python
L[::5]
```

ç”šè‡³ä»€ä¹ˆéƒ½ä¸å†™ï¼Œåªå†™`[:]`å°±å¯ä»¥åŽŸæ ·å¤åˆ¶ä¸€ä¸ª listï¼š

```python
 L[:]
```

### 3.1.2 tuple åˆ‡ç‰‡

!&gt; tuple ä¹Ÿæ˜¯ä¸€ç§ listï¼Œå”¯ä¸€åŒºåˆ«æ˜¯ tuple ä¸å¯å˜ã€‚å› æ­¤ï¼Œtuple ä¹Ÿå¯ä»¥ç”¨åˆ‡ç‰‡æ“ä½œï¼Œåªæ˜¯æ“ä½œçš„ç»“æžœä»æ˜¯ tupleï¼š

```python
(0, 1, 2, 3, 4, 5)[:3]
```

![image-20200712222247480](https://gitee.com/wugenqiang/PictureBed/raw/master/NoteBook/20200712222248.png)

### 3.1.3 str åˆ‡ç‰‡

å­—ç¬¦ä¸²`&#39;xxx&#39;`ä¹Ÿå¯ä»¥çœ‹æˆæ˜¯ä¸€ç§ listï¼Œæ¯ä¸ªå…ƒç´ å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ã€‚å› æ­¤ï¼Œå­—ç¬¦ä¸²ä¹Ÿå¯ä»¥ç”¨åˆ‡ç‰‡æ“ä½œï¼Œåªæ˜¯æ“ä½œç»“æžœä»æ˜¯å­—ç¬¦ä¸²ï¼š

```python
&#39;ABCDEFG&#39;[:3]
```

![image-20200712222833885](https://gitee.com/wugenqiang/PictureBed/raw/master/images01/20200712222834.png)

```python
&#39;ABCDEFG&#39;[::2]
```

![image-20200712223059989](https://gitee.com/wugenqiang/PictureBed/raw/master/images01/20200712223100.png)

åœ¨å¾ˆå¤šç¼–ç¨‹è¯­è¨€ä¸­ï¼Œé’ˆå¯¹å­—ç¬¦ä¸²æä¾›äº†å¾ˆå¤šå„ç§æˆªå–å‡½æ•°ï¼ˆä¾‹å¦‚ï¼Œsubstringï¼‰ï¼Œå…¶å®žç›®çš„å°±æ˜¯å¯¹å­—ç¬¦ä¸²åˆ‡ç‰‡ã€‚Python æ²¡æœ‰é’ˆå¯¹å­—ç¬¦ä¸²çš„æˆªå–å‡½æ•°ï¼Œåªéœ€è¦åˆ‡ç‰‡ä¸€ä¸ªæ“ä½œå°±å¯ä»¥å®Œæˆï¼Œéžå¸¸ç®€å•ã€‚

&gt; âœï¸ ç»ƒä¹ é¢˜ï¼š

åˆ©ç”¨åˆ‡ç‰‡æ“ä½œï¼Œå®žçŽ°ä¸€ä¸ª trim() å‡½æ•°ï¼ŒåŽ»é™¤å­—ç¬¦ä¸²é¦–å°¾çš„ç©ºæ ¼ï¼Œæ³¨æ„ä¸è¦è°ƒç”¨ str çš„`strip()`æ–¹æ³•ï¼š

```python
def trim(s):
    while s[:1] == &#39; &#39;:
        s = s[1:]
    while s[-1:] == &#39; &#39;:
        s = s[:-1]
    return s
```



&gt; âœï¸ å°ç»“ï¼š

æœ‰äº†åˆ‡ç‰‡æ“ä½œï¼Œå¾ˆå¤šåœ°æ–¹å¾ªçŽ¯å°±ä¸å†éœ€è¦äº†ã€‚Python çš„åˆ‡ç‰‡éžå¸¸çµæ´»ï¼Œä¸€è¡Œä»£ç å°±å¯ä»¥å®žçŽ°å¾ˆå¤šè¡Œå¾ªçŽ¯æ‰èƒ½å®Œæˆçš„æ“ä½œã€‚

## 3.2 è¿­ä»£

&gt; å®šä¹‰ï¼šå¦‚æžœç»™å®šä¸€ä¸ª list æˆ– tupleï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡`for`å¾ªçŽ¯æ¥éåŽ†è¿™ä¸ª list æˆ– tupleï¼Œè¿™ç§éåŽ†æˆ‘ä»¬ç§°ä¸ºè¿­ä»£ï¼ˆIterationï¼‰ã€‚

è¿­ä»£æ˜¯é€šè¿‡ for ... in æ¥å®Œæˆçš„ï¼ŒPython çš„`for`å¾ªçŽ¯æŠ½è±¡ç¨‹åº¦è¦é«˜äºŽ C çš„`for`å¾ªçŽ¯ï¼Œå› ä¸º Python çš„`for`å¾ªçŽ¯ä¸ä»…å¯ä»¥ç”¨åœ¨ list æˆ– tuple ä¸Šï¼Œè¿˜å¯ä»¥ä½œç”¨åœ¨å…¶ä»–å¯è¿­ä»£å¯¹è±¡ä¸Šã€‚

list è¿™ç§æ•°æ®ç±»åž‹è™½ç„¶æœ‰ä¸‹æ ‡ï¼Œä½†å¾ˆå¤šå…¶ä»–æ•°æ®ç±»åž‹æ˜¯æ²¡æœ‰ä¸‹æ ‡çš„ï¼Œä½†æ˜¯ï¼Œåªè¦æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œæ— è®ºæœ‰æ— ä¸‹æ ‡ï¼Œéƒ½å¯ä»¥è¿­ä»£ï¼Œæ¯”å¦‚ dict å°±å¯ä»¥è¿­ä»£ï¼š

```python
d = {&#39;a&#39;: 1, &#39;b&#39;: 2, &#39;c&#39;: 3}
for key in d:
    print(key)
```

å› ä¸º dict çš„å­˜å‚¨ä¸æ˜¯æŒ‰ç…§ list çš„æ–¹å¼é¡ºåºæŽ’åˆ—ï¼Œæ‰€ä»¥ï¼Œè¿­ä»£å‡ºçš„ç»“æžœé¡ºåºå¾ˆå¯èƒ½ä¸ä¸€æ ·ã€‚

ðŸ— é»˜è®¤æƒ…å†µä¸‹ï¼Œdict è¿­ä»£çš„æ˜¯ keyã€‚å¦‚æžœè¦è¿­ä»£ valueï¼Œå¯ä»¥ç”¨`for value in d.values()`ï¼Œå¦‚æžœè¦åŒæ—¶è¿­ä»£ key å’Œ valueï¼Œå¯ä»¥ç”¨`for k, v in d.items()`ã€‚

ç”±äºŽå­—ç¬¦ä¸²ä¹Ÿæ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œå› æ­¤ï¼Œä¹Ÿå¯ä»¥ä½œç”¨äºŽ`for`å¾ªçŽ¯ï¼š

```python
for ch in &#39;ABC&#39;:
    print(ch)
```

æ‰€ä»¥ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨`for`å¾ªçŽ¯æ—¶ï¼Œåªè¦ä½œç”¨äºŽä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œ`for`å¾ªçŽ¯å°±å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œè€Œæˆ‘ä»¬ä¸å¤ªå…³å¿ƒè¯¥å¯¹è±¡ç©¶ç«Ÿæ˜¯listè¿˜æ˜¯å…¶ä»–æ•°æ®ç±»åž‹ã€‚

é‚£ä¹ˆï¼Œå¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¯è¿­ä»£å¯¹è±¡å‘¢ï¼Ÿæ–¹æ³•æ˜¯é€šè¿‡ collections æ¨¡å—çš„ Iterable ç±»åž‹åˆ¤æ–­ï¼š

```python
&gt;&gt;&gt; from collections import Iterable
&gt;&gt;&gt; isinstance(&#39;abc&#39;, Iterable) # stræ˜¯å¦å¯è¿­ä»£
True
&gt;&gt;&gt; isinstance([1,2,3], Iterable) # listæ˜¯å¦å¯è¿­ä»£
True
&gt;&gt;&gt; isinstance(123, Iterable) # æ•´æ•°æ˜¯å¦å¯è¿­ä»£
False
```

æœ€åŽä¸€ä¸ªå°é—®é¢˜ï¼Œå¦‚æžœè¦å¯¹ list å®žçŽ°ç±»ä¼¼ Java é‚£æ ·çš„ä¸‹æ ‡å¾ªçŽ¯æ€Žä¹ˆåŠžï¼ŸPython å†…ç½®çš„`enumerate`å‡½æ•°å¯ä»¥æŠŠä¸€ä¸ª list å˜æˆç´¢å¼•-å…ƒç´ å¯¹ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨`for`å¾ªçŽ¯ä¸­åŒæ—¶è¿­ä»£ç´¢å¼•å’Œå…ƒç´ æœ¬èº«ï¼š

```python
&gt;&gt;&gt; for i, value in enumerate([&#39;A&#39;, &#39;B&#39;, &#39;C&#39;]):
...     print(i, value)
...
0 A
1 B
2 C
```

ä¸Šé¢çš„`for`å¾ªçŽ¯é‡Œï¼ŒåŒæ—¶å¼•ç”¨äº†ä¸¤ä¸ªå˜é‡ï¼Œåœ¨ Python é‡Œæ˜¯å¾ˆå¸¸è§çš„ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š

```python
&gt;&gt;&gt; for x, y in [(1, 1), (2, 4), (3, 9)]:
...     print(x, y)
...
1 1
2 4
3 9
```

&gt; âœï¸ ç»ƒä¹ é¢˜ï¼š

è¯·ä½¿ç”¨è¿­ä»£æŸ¥æ‰¾ä¸€ä¸ª list ä¸­æœ€å°å’Œæœ€å¤§å€¼ï¼Œå¹¶è¿”å›žä¸€ä¸ª tupleï¼š

```python
def findMinAndMax(L):
    if L == []:
        return (None, None)
    else:
        MIN = L[0]
        MAX = L[0]
        for i in L:
            MIN = min(MIN, i)
            MAX = max(MAX, i) 
        return (MIN, MAX)
# æµ‹è¯•
if findMinAndMax([]) != (None, None):
    print(&#39;æµ‹è¯•å¤±è´¥!&#39;)
elif findMinAndMax([7]) != (7, 7):
    print(&#39;æµ‹è¯•å¤±è´¥!&#39;)
elif findMinAndMax([7, 1]) != (1, 7):
    print(&#39;æµ‹è¯•å¤±è´¥!&#39;)
elif findMinAndMax([7, 1, 3, 9, 5]) != (1, 9):
    print(&#39;æµ‹è¯•å¤±è´¥!&#39;)
else:
    print(&#39;æµ‹è¯•æˆåŠŸ!&#39;)
```

ç»“æžœå›¾ï¼š

![ç»“æžœå›¾](https://gitee.com/wugenqiang/PictureBed/raw/master/images01/20200715205941.png)

&gt; âœï¸ å°ç»“ï¼š

ä»»ä½•å¯è¿­ä»£å¯¹è±¡éƒ½å¯ä»¥ä½œç”¨äºŽ`for`å¾ªçŽ¯ï¼ŒåŒ…æ‹¬æˆ‘ä»¬è‡ªå®šä¹‰çš„æ•°æ®ç±»åž‹ï¼Œåªè¦ç¬¦åˆè¿­ä»£æ¡ä»¶ï¼Œå°±å¯ä»¥ä½¿ç”¨`for`å¾ªçŽ¯ã€‚

## 3.3 åˆ—è¡¨ç”Ÿæˆå¼

åˆ—è¡¨ç”Ÿæˆå¼å³ List Comprehensionsï¼Œæ˜¯ Python å†…ç½®çš„éžå¸¸ç®€å•å´å¼ºå¤§çš„å¯ä»¥ç”¨æ¥åˆ›å»º list çš„ç”Ÿæˆå¼ã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œè¦ç”Ÿæˆ list `[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]`å¯ä»¥ç”¨`list(range(1, 11))`ï¼š

![image-20200716110005465](https://gitee.com/wugenqiang/PictureBed/raw/master/images01/20200716110013.png)

ä½†å¦‚æžœè¦ç”Ÿæˆ`[1x1, 2x2, 3x3, ..., 10x10]`æ€Žä¹ˆåšï¼Ÿ

* æ–¹æ³•ä¸€æ˜¯å¾ªçŽ¯ï¼š

```python
L = []
for x in range(1, 11):
    L.append(x * x)
L
```

![image-20200716110241249](https://gitee.com/wugenqiang/PictureBed/raw/master/images01/20200716110242.png)

ä½†æ˜¯å¾ªçŽ¯å¤ªç¹çï¼Œè€Œåˆ—è¡¨ç”Ÿæˆå¼åˆ™å¯ä»¥ç”¨ä¸€è¡Œè¯­å¥ä»£æ›¿å¾ªçŽ¯ç”Ÿæˆä¸Šé¢çš„ listï¼š

* æ–¹æ³•äºŒï¼šåˆ—è¡¨ç”Ÿæˆå¼

```python
[x * x for x in range(1, 11)]
```

![image-20200716110448050](https://gitee.com/wugenqiang/PictureBed/raw/master/images01/20200716110449.png)

ðŸ‘’ å†™åˆ—è¡¨ç”Ÿæˆå¼æ—¶ï¼ŒæŠŠè¦ç”Ÿæˆçš„å…ƒç´ `x * x`æ”¾åˆ°å‰é¢ï¼ŒåŽé¢è·Ÿ`for`å¾ªçŽ¯ï¼Œå°±å¯ä»¥æŠŠ list åˆ›å»ºå‡ºæ¥ï¼Œååˆ†æœ‰ç”¨ï¼Œå¤šå†™å‡ æ¬¡ï¼Œå¾ˆå¿«å°±å¯ä»¥ç†Ÿæ‚‰è¿™ç§è¯­æ³•ã€‚

for å¾ªçŽ¯åŽé¢è¿˜å¯ä»¥åŠ ä¸Š if åˆ¤æ–­ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç­›é€‰å‡ºä»…å¶æ•°çš„å¹³æ–¹ï¼š

```python
[x * x for x in range(1, 11) if x % 2 == 0]
```

![image-20200716110714610](https://gitee.com/wugenqiang/PictureBed/raw/master/images01/20200716110715.png)

è¿˜å¯ä»¥ä½¿ç”¨ä¸¤å±‚å¾ªçŽ¯ï¼Œå¯ä»¥ç”Ÿæˆå…¨æŽ’åˆ—ï¼š

```python
[m &#43; n for m in &#39;ABC&#39; for n in &#39;XYZ&#39;]
```

![image-20200716110813806](https://gitee.com/wugenqiang/PictureBed/raw/master/images01/20200716110816.png)

ä¸‰å±‚å’Œä¸‰å±‚ä»¥ä¸Šçš„å¾ªçŽ¯å°±å¾ˆå°‘ç”¨åˆ°äº†ã€‚

è¿ç”¨åˆ—è¡¨ç”Ÿæˆå¼ï¼Œå¯ä»¥å†™å‡ºéžå¸¸ç®€æ´çš„ä»£ç ã€‚ä¾‹å¦‚ï¼Œåˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•åï¼Œå¯ä»¥é€šè¿‡ä¸€è¡Œä»£ç å®žçŽ°ï¼š

```python
import os # å¯¼å…¥osæ¨¡å—ï¼Œæ¨¡å—çš„æ¦‚å¿µåŽé¢è®²åˆ°
[d for d in os.listdir(&#39;.&#39;)] # os.listdirå¯ä»¥åˆ—å‡ºæ–‡ä»¶å’Œç›®å½•
```

![image-20200716111017314](https://gitee.com/wugenqiang/PictureBed/raw/master/images01/20200716111018.png)

`for`å¾ªçŽ¯å…¶å®žå¯ä»¥åŒæ—¶ä½¿ç”¨ä¸¤ä¸ªç”šè‡³å¤šä¸ªå˜é‡ï¼Œæ¯”å¦‚`dict`çš„`items()`å¯ä»¥åŒæ—¶è¿­ä»£ key å’Œ valueï¼š

```python
d = {&#39;x&#39;: &#39;A&#39;, &#39;y&#39;: &#39;B&#39;, &#39;z&#39;: &#39;C&#39; }
for k, v in d.items():
    print(k, &#39;=&#39;, v)
```

![image-20200716111306467](https://gitee.com/wugenqiang/PictureBed/raw/master/images01/20200716111307.png)

å› æ­¤ï¼Œåˆ—è¡¨ç”Ÿæˆå¼ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸¤ä¸ªå˜é‡æ¥ç”Ÿæˆ listï¼š

```python
d = {&#39;x&#39;: &#39;A&#39;, &#39;y&#39;: &#39;B&#39;, &#39;z&#39;: &#39;C&#39; }
[k &#43; &#39;=&#39; &#43; v for k, v in d.items()]
```

![image-20200716111534526](https://gitee.com/wugenqiang/PictureBed/raw/master/images01/20200716111535.png)

æœ€åŽæŠŠä¸€ä¸ª list ä¸­æ‰€æœ‰çš„å­—ç¬¦ä¸²å˜æˆå°å†™ï¼š

```python
L = [&#39;Hello&#39;, &#39;World&#39;, &#39;IBM&#39;, &#39;Apple&#39;]
[s.lower() for s in L]
```

![image-20200716111755472](https://gitee.com/wugenqiang/PictureBed/raw/master/images01/20200716111756.png)

### 3.3.1 if ... else

&gt; ä½¿ç”¨åˆ—è¡¨ç”Ÿæˆå¼çš„æ—¶å€™ï¼Œæœ‰äº›ç«¥éž‹ç»å¸¸æžä¸æ¸…æ¥š`if...else`çš„ç”¨æ³•ã€‚

ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç æ­£å¸¸è¾“å‡ºå¶æ•°ï¼š

```python
[x for x in range(1, 11) if x % 2 == 0]
```

ä½†æ˜¯ï¼Œæˆ‘ä»¬ä¸èƒ½åœ¨æœ€åŽçš„`if`åŠ ä¸Š`else`ï¼š

```python
[x for x in range(1, 11) if x % 2 == 0 else 0]
```

![image-20200716112208908](https://gitee.com/wugenqiang/PictureBed/raw/master/images01/20200716112210.png)

è¿™æ˜¯å› ä¸ºè·Ÿåœ¨`for`åŽé¢çš„`if`æ˜¯ä¸€ä¸ªç­›é€‰æ¡ä»¶ï¼Œä¸èƒ½å¸¦`else`ï¼Œå¦åˆ™å¦‚ä½•ç­›é€‰ï¼Ÿ

å¦ä¸€äº›ç«¥éž‹å‘çŽ°æŠŠ`if`å†™åœ¨`for`å‰é¢å¿…é¡»åŠ `else`ï¼Œå¦åˆ™æŠ¥é”™ï¼š

![image-20200716112356893](https://gitee.com/wugenqiang/PictureBed/raw/master/images01/20200716112357.png)

è¿™æ˜¯å› ä¸º`for`å‰é¢çš„éƒ¨åˆ†æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå®ƒå¿…é¡»æ ¹æ®`x`è®¡ç®—å‡ºä¸€ä¸ªç»“æžœã€‚å› æ­¤ï¼Œè€ƒå¯Ÿè¡¨è¾¾å¼ï¼š`x if x % 2 == 0`ï¼Œå®ƒæ— æ³•æ ¹æ®`x`è®¡ç®—å‡ºç»“æžœï¼Œå› ä¸ºç¼ºå°‘`else`ï¼Œå¿…é¡»åŠ ä¸Š`else`ï¼š

```python
[x if x % 2 == 0 else -x for x in range(1, 11)]
```

![image-20200716112506596](https://gitee.com/wugenqiang/PictureBed/raw/master/images01/20200716112507.png)

ä¸Šè¿°`for`å‰é¢çš„è¡¨è¾¾å¼`x if x % 2 == 0 else -x`æ‰èƒ½æ ¹æ®`x`è®¡ç®—å‡ºç¡®å®šçš„ç»“æžœã€‚

å¯è§ï¼Œåœ¨ä¸€ä¸ªåˆ—è¡¨ç”Ÿæˆå¼ä¸­ï¼Œ`for`å‰é¢çš„`if ... else`æ˜¯è¡¨è¾¾å¼ï¼Œè€Œ`for`åŽé¢çš„`if`æ˜¯è¿‡æ»¤æ¡ä»¶ï¼Œä¸èƒ½å¸¦`else`ã€‚

&gt; âœï¸ ç»ƒä¹ é¢˜ï¼š

å¦‚æžœlistä¸­æ—¢åŒ…å«å­—ç¬¦ä¸²ï¼ŒåˆåŒ…å«æ•´æ•°ï¼Œç”±äºŽéžå­—ç¬¦ä¸²ç±»åž‹æ²¡æœ‰`lower()`æ–¹æ³•ï¼Œæ‰€ä»¥åˆ—è¡¨ç”Ÿæˆå¼ä¼šæŠ¥é”™ï¼š

![image-20200716112807607](https://gitee.com/wugenqiang/PictureBed/raw/master/images01/20200716112808.png)

ä½¿ç”¨å†…å»ºçš„`isinstance`å‡½æ•°å¯ä»¥åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯ä¸æ˜¯å­—ç¬¦ä¸²ï¼š

![image-20200716113013011](https://gitee.com/wugenqiang/PictureBed/raw/master/images01/20200716113014.png)

è¯·ä¿®æ”¹åˆ—è¡¨ç”Ÿæˆå¼ï¼Œé€šè¿‡æ·»åŠ `if`è¯­å¥ä¿è¯åˆ—è¡¨ç”Ÿæˆå¼èƒ½æ­£ç¡®åœ°æ‰§è¡Œï¼š

```python
L1 = [&#39;Hello&#39;, &#39;World&#39;, 18, &#39;Apple&#39;, None]
L2 = [s.lower() for s in L1 if isinstance(s,str)]
# æµ‹è¯•:
print(L2)
if L2 == [&#39;hello&#39;, &#39;world&#39;, &#39;apple&#39;]:
    print(&#39;æµ‹è¯•é€šè¿‡!&#39;)
else:
    print(&#39;æµ‹è¯•å¤±è´¥!&#39;)
```

![image-20200716113244975](https://gitee.com/wugenqiang/PictureBed/raw/master/images01/20200716113245.png)

&gt; âœï¸ å°ç»“ï¼š

è¿ç”¨åˆ—è¡¨ç”Ÿæˆå¼ï¼Œå¯ä»¥å¿«é€Ÿç”Ÿæˆ listï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ª list æŽ¨å¯¼å‡ºå¦ä¸€ä¸ª listï¼Œè€Œä»£ç å´ååˆ†ç®€æ´ã€‚

## 3.4 ç”Ÿæˆå™¨

&gt; é€šè¿‡åˆ—è¡¨ç”Ÿæˆå¼ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æŽ¥åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ã€‚ä½†æ˜¯ï¼Œå—åˆ°å†…å­˜é™åˆ¶ï¼Œåˆ—è¡¨å®¹é‡è‚¯å®šæ˜¯æœ‰é™çš„ã€‚è€Œä¸”ï¼Œåˆ›å»ºä¸€ä¸ªåŒ…å« 100 ä¸‡ä¸ªå…ƒç´ çš„åˆ—è¡¨ï¼Œä¸ä»…å ç”¨å¾ˆå¤§çš„å­˜å‚¨ç©ºé—´ï¼Œå¦‚æžœæˆ‘ä»¬ä»…ä»…éœ€è¦è®¿é—®å‰é¢å‡ ä¸ªå…ƒç´ ï¼Œé‚£åŽé¢ç»å¤§å¤šæ•°å…ƒç´ å ç”¨çš„ç©ºé—´éƒ½ç™½ç™½æµªè´¹äº†ã€‚

æ‰€ä»¥ï¼Œå¦‚æžœåˆ—è¡¨å…ƒç´ å¯ä»¥æŒ‰ç…§æŸç§ç®—æ³•æŽ¨ç®—å‡ºæ¥ï¼Œé‚£æˆ‘ä»¬æ˜¯å¦å¯ä»¥åœ¨å¾ªçŽ¯çš„è¿‡ç¨‹ä¸­ä¸æ–­æŽ¨ç®—å‡ºåŽç»­çš„å…ƒç´ å‘¢ï¼Ÿè¿™æ ·å°±ä¸å¿…åˆ›å»ºå®Œæ•´çš„ listï¼Œä»Žè€ŒèŠ‚çœå¤§é‡çš„ç©ºé—´ã€‚åœ¨ Python ä¸­ï¼Œè¿™ç§`ä¸€è¾¹å¾ªçŽ¯ä¸€è¾¹è®¡ç®—`çš„æœºåˆ¶ï¼Œç§°ä¸ºç”Ÿæˆå™¨ï¼šgeneratorã€‚

ðŸŽ‰ è¦åˆ›å»ºä¸€ä¸ª generatorï¼Œæœ‰å¾ˆå¤šç§æ–¹æ³•ã€‚ç¬¬ä¸€ç§æ–¹æ³•å¾ˆç®€å•ï¼Œåªè¦æŠŠä¸€ä¸ªåˆ—è¡¨ç”Ÿæˆå¼çš„`[]`æ”¹æˆ`()`ï¼Œå°±åˆ›å»ºäº†ä¸€ä¸ª generatorï¼š

![image-20200716114555027](https://gitee.com/wugenqiang/PictureBed/raw/master/images01/20200716114556.png)

åˆ›å»º`L`å’Œ`g`çš„åŒºåˆ«ä»…åœ¨äºŽæœ€å¤–å±‚çš„`[]`å’Œ`()`ï¼Œ`L`æ˜¯ä¸€ä¸ªlistï¼Œè€Œ`g`æ˜¯ä¸€ä¸ª generatorã€‚

æˆ‘ä»¬å¯ä»¥ç›´æŽ¥æ‰“å°å‡º list çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œä½†æˆ‘ä»¬æ€Žä¹ˆæ‰“å°å‡º generator çš„æ¯ä¸€ä¸ªå…ƒç´ å‘¢ï¼Ÿ

å¦‚æžœè¦ä¸€ä¸ªä¸€ä¸ªæ‰“å°å‡ºæ¥ï¼Œå¯ä»¥é€šè¿‡`next()`å‡½æ•°èŽ·å¾— generator çš„ä¸‹ä¸€ä¸ªè¿”å›žå€¼ï¼š

![image-20200716115124114](https://gitee.com/wugenqiang/PictureBed/raw/master/images01/20200716115125.png)

æˆ‘ä»¬è®²è¿‡ï¼Œgenerator ä¿å­˜çš„æ˜¯ç®—æ³•ï¼Œæ¯æ¬¡è°ƒç”¨`next(g)`ï¼Œå°±è®¡ç®—å‡º`g`çš„ä¸‹ä¸€ä¸ªå…ƒç´ çš„å€¼ï¼Œç›´åˆ°è®¡ç®—åˆ°æœ€åŽä¸€ä¸ªå…ƒç´ ï¼Œæ²¡æœ‰æ›´å¤šçš„å…ƒç´ æ—¶ï¼ŒæŠ›å‡º`StopIteration`çš„é”™è¯¯ã€‚

å½“ç„¶ï¼Œä¸Šé¢è¿™ç§ä¸æ–­è°ƒç”¨`next(g)`å®žåœ¨æ˜¯å¤ªå˜æ€äº†ï¼Œæ­£ç¡®çš„æ–¹æ³•æ˜¯ä½¿ç”¨`for`å¾ªçŽ¯ï¼Œå› ä¸º generator ä¹Ÿæ˜¯å¯è¿­ä»£å¯¹è±¡ï¼š

```python
g = (x * x for x in range(10))
for n in g:
    print(n)
```

æ‰€ä»¥ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª generator åŽï¼ŒåŸºæœ¬ä¸Šæ°¸è¿œä¸ä¼šè°ƒç”¨`next()`ï¼Œè€Œæ˜¯é€šè¿‡`for`å¾ªçŽ¯æ¥è¿­ä»£å®ƒï¼Œå¹¶ä¸”ä¸éœ€è¦å…³å¿ƒ`StopIteration`çš„é”™è¯¯ã€‚

generator éžå¸¸å¼ºå¤§ã€‚å¦‚æžœæŽ¨ç®—çš„ç®—æ³•æ¯”è¾ƒå¤æ‚ï¼Œç”¨ç±»ä¼¼åˆ—è¡¨ç”Ÿæˆå¼çš„`for`å¾ªçŽ¯æ— æ³•å®žçŽ°çš„æ—¶å€™ï¼Œè¿˜å¯ä»¥ç”¨å‡½æ•°æ¥å®žçŽ°ã€‚

æ¯”å¦‚ï¼Œè‘—åçš„æ–æ³¢æ‹‰å¥‘æ•°åˆ—ï¼ˆFibonacciï¼‰ï¼Œé™¤ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªæ•°å¤–ï¼Œä»»æ„ä¸€ä¸ªæ•°éƒ½å¯ç”±å‰ä¸¤ä¸ªæ•°ç›¸åŠ å¾—åˆ°ï¼š

1, 1, 2, 3, 5, 8, 13, 21, 34, ...

æ–æ³¢æ‹‰å¥‘æ•°åˆ—ç”¨åˆ—è¡¨ç”Ÿæˆå¼å†™ä¸å‡ºæ¥ï¼Œä½†æ˜¯ï¼Œç”¨å‡½æ•°æŠŠå®ƒæ‰“å°å‡ºæ¥å´å¾ˆå®¹æ˜“ï¼š

```python
def fib(max):
    n, a, b = 0, 0, 1
    while n &lt; max:
        print(b)
        a, b = b, a &#43; b
        n = n &#43; 1
    return &#39;done&#39;
```

æ³¨æ„ï¼š

èµ‹å€¼è¯­å¥ï¼ša, b = b, a &#43; b

ç›¸å½“äºŽï¼š

```python
t = (b, a &#43; b) # tæ˜¯ä¸€ä¸ªtuple
a = t[0]
b = t[1]
```

ä½†ä¸å¿…æ˜¾å¼å†™å‡ºä¸´æ—¶å˜é‡ t å°±å¯ä»¥èµ‹å€¼ã€‚

ä¸Šé¢çš„å‡½æ•°å¯ä»¥è¾“å‡ºæ–æ³¢é‚£å¥‘æ•°åˆ—çš„å‰ N ä¸ªæ•°ï¼š

![image-20200716124358250](https://gitee.com/wugenqiang/PictureBed/raw/master/images01/20200716124359.png)

ä»”ç»†è§‚å¯Ÿï¼Œå¯ä»¥çœ‹å‡ºï¼Œ`fib`å‡½æ•°å®žé™…ä¸Šæ˜¯å®šä¹‰äº†æ–æ³¢æ‹‰å¥‘æ•°åˆ—çš„æŽ¨ç®—è§„åˆ™ï¼Œå¯ä»¥ä»Žç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼ŒæŽ¨ç®—å‡ºåŽç»­ä»»æ„çš„å…ƒç´ ï¼Œè¿™ç§é€»è¾‘å…¶å®žéžå¸¸ç±»ä¼¼ generatorã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸Šé¢çš„å‡½æ•°å’Œ generator ä»…ä¸€æ­¥ä¹‹é¥ã€‚è¦æŠŠ`fib`å‡½æ•°å˜æˆ generatorï¼Œåªéœ€è¦æŠŠ`print(b)`æ”¹ä¸º`yield b`å°±å¯ä»¥äº†ï¼š

```python
def fib(max):
    n, a, b = 0, 0, 1
    while n &lt; max:
        yield b
        a, b = b, a &#43; b
        n = n &#43; 1
    return &#39;done&#39;
```

![image-20200716124517165](https://gitee.com/wugenqiang/PictureBed/raw/master/images01/20200716124518.png)

è¿™å°±æ˜¯å®šä¹‰ generator çš„å¦ä¸€ç§æ–¹æ³•ã€‚å¦‚æžœä¸€ä¸ªå‡½æ•°å®šä¹‰ä¸­åŒ…å«`yield`å…³é”®å­—ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°±ä¸å†æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œè€Œæ˜¯ä¸€ä¸ª generatorï¼š

è¿™é‡Œï¼Œæœ€éš¾ç†è§£çš„å°±æ˜¯ generator å’Œå‡½æ•°çš„æ‰§è¡Œæµç¨‹ä¸ä¸€æ ·ã€‚å‡½æ•°æ˜¯é¡ºåºæ‰§è¡Œï¼Œé‡åˆ°`return`è¯­å¥æˆ–è€…æœ€åŽä¸€è¡Œå‡½æ•°è¯­å¥å°±è¿”å›žã€‚è€Œå˜æˆ generator çš„å‡½æ•°ï¼Œåœ¨æ¯æ¬¡è°ƒç”¨`next()`çš„æ—¶å€™æ‰§è¡Œï¼Œé‡åˆ°`yield`è¯­å¥è¿”å›žï¼Œå†æ¬¡æ‰§è¡Œæ—¶ä»Žä¸Šæ¬¡è¿”å›žçš„`yield`è¯­å¥å¤„ç»§ç»­æ‰§è¡Œã€‚

ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œå®šä¹‰ä¸€ä¸ª generatorï¼Œä¾æ¬¡è¿”å›žæ•°å­— 1ï¼Œ3ï¼Œ5ï¼š

```python
def odd():
    print(&#39;step 1&#39;)
    yield 1
    print(&#39;step 2&#39;)
    yield(3)
    print(&#39;step 3&#39;)
    yield(5)
```

è°ƒç”¨è¯¥ generator æ—¶ï¼Œé¦–å…ˆè¦ç”Ÿæˆä¸€ä¸ª generator å¯¹è±¡ï¼Œç„¶åŽç”¨`next()`å‡½æ•°ä¸æ–­èŽ·å¾—ä¸‹ä¸€ä¸ªè¿”å›žå€¼ï¼š

![image-20200716124859127](https://gitee.com/wugenqiang/PictureBed/raw/master/images01/20200716124900.png)

å¯ä»¥çœ‹åˆ°ï¼Œ`odd`ä¸æ˜¯æ™®é€šå‡½æ•°ï¼Œè€Œæ˜¯ generatorï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œé‡åˆ°`yield`å°±ä¸­æ–­ï¼Œä¸‹æ¬¡åˆç»§ç»­æ‰§è¡Œã€‚æ‰§è¡Œ 3 æ¬¡`yield`åŽï¼Œå·²ç»æ²¡æœ‰`yield`å¯ä»¥æ‰§è¡Œäº†ï¼Œæ‰€ä»¥ï¼Œç¬¬ 4 æ¬¡è°ƒç”¨`next(o)`å°±æŠ¥é”™ã€‚

å›žåˆ°`fib`çš„ä¾‹å­ï¼Œæˆ‘ä»¬åœ¨å¾ªçŽ¯è¿‡ç¨‹ä¸­ä¸æ–­è°ƒç”¨`yield`ï¼Œå°±ä¼šä¸æ–­ä¸­æ–­ã€‚å½“ç„¶è¦ç»™å¾ªçŽ¯è®¾ç½®ä¸€ä¸ªæ¡ä»¶æ¥é€€å‡ºå¾ªçŽ¯ï¼Œä¸ç„¶å°±ä¼šäº§ç”Ÿä¸€ä¸ªæ— é™æ•°åˆ—å‡ºæ¥ã€‚

åŒæ ·çš„ï¼ŒæŠŠå‡½æ•°æ”¹æˆ generator åŽï¼Œæˆ‘ä»¬åŸºæœ¬ä¸Šä»Žæ¥ä¸ä¼šç”¨`next()`æ¥èŽ·å–ä¸‹ä¸€ä¸ªè¿”å›žå€¼ï¼Œè€Œæ˜¯ç›´æŽ¥ä½¿ç”¨`for`å¾ªçŽ¯æ¥è¿­ä»£ï¼š

```python
for n in fib(6):
    print(n)
```

ä½†æ˜¯ç”¨`for`å¾ªçŽ¯è°ƒç”¨ generator æ—¶ï¼Œå‘çŽ°æ‹¿ä¸åˆ° generator çš„`return`è¯­å¥çš„è¿”å›žå€¼ã€‚å¦‚æžœæƒ³è¦æ‹¿åˆ°è¿”å›žå€¼ï¼Œå¿…é¡»æ•èŽ·`StopIteration`é”™è¯¯ï¼Œè¿”å›žå€¼åŒ…å«åœ¨`StopIteration`çš„`value`ä¸­ï¼š

```python
g = fib(6)
while True:
    try:
        x = next(g)
        print(&#39;g:&#39;, x)
    except StopIteration as e:
        print(&#39;Generator return value:&#39;, e.value)
        break
```

![image-20200716125328414](https://gitee.com/wugenqiang/PictureBed/raw/master/images01/20200716125329.png)

å…³äºŽå¦‚ä½•æ•èŽ·é”™è¯¯ï¼ŒåŽé¢çš„é”™è¯¯å¤„ç†è¿˜ä¼šè¯¦ç»†è®²è§£ã€‚

&gt; âœï¸ ç»ƒä¹ é¢˜ï¼š

[æ¨è¾‰ä¸‰è§’](http://baike.baidu.com/view/7804.htm)å®šä¹‰å¦‚ä¸‹ï¼š

```ascii
          1
         / \
        1   1
       / \ / \
      1   2   1
     / \ / \ / \
    1   3   3   1
   / \ / \ / \ / \
  1   4   6   4   1
 / \ / \ / \ / \ / \
1   5   10  10  5   1
```

æŠŠæ¯ä¸€è¡Œçœ‹åšä¸€ä¸ª listï¼Œè¯•å†™ä¸€ä¸ª generatorï¼Œä¸æ–­è¾“å‡ºä¸‹ä¸€è¡Œçš„ listï¼š

```python
def triangles():
    L = [1]
    while True:
        yield L 
        L = [1] &#43; [L[i] &#43; L[i&#43;1] for i in range(len(L) - 1)] &#43; [1]
    pass
```

æµ‹è¯•ï¼š

```python
n = 0
results = []
for t in triangles():
    results.append(t)
    n = n &#43; 1
    if n == 10:
        break

for t in results:
    print(t)

if results == [
    [1],
    [1, 1],
    [1, 2, 1],
    [1, 3, 3, 1],
    [1, 4, 6, 4, 1],
    [1, 5, 10, 10, 5, 1],
    [1, 6, 15, 20, 15, 6, 1],
    [1, 7, 21, 35, 35, 21, 7, 1],
    [1, 8, 28, 56, 70, 56, 28, 8, 1],
    [1, 9, 36, 84, 126, 126, 84, 36, 9, 1]
]:
    print(&#39;æµ‹è¯•é€šè¿‡!&#39;)
else:
    print(&#39;æµ‹è¯•å¤±è´¥!&#39;)
```

&gt; å°ç»“ï¼š

generator æ˜¯éžå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œåœ¨ Python ä¸­ï¼Œå¯ä»¥ç®€å•åœ°æŠŠåˆ—è¡¨ç”Ÿæˆå¼æ”¹æˆ generatorï¼Œä¹Ÿå¯ä»¥é€šè¿‡å‡½æ•°å®žçŽ°å¤æ‚é€»è¾‘çš„ generatorã€‚

è¦ç†è§£ generator çš„å·¥ä½œåŽŸç†ï¼Œå®ƒæ˜¯åœ¨`for`å¾ªçŽ¯çš„è¿‡ç¨‹ä¸­ä¸æ–­è®¡ç®—å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶åœ¨é€‚å½“çš„æ¡ä»¶ç»“æŸ`for`å¾ªçŽ¯ã€‚å¯¹äºŽå‡½æ•°æ”¹æˆçš„ generator æ¥è¯´ï¼Œé‡åˆ°`return`è¯­å¥æˆ–è€…æ‰§è¡Œåˆ°å‡½æ•°ä½“æœ€åŽä¸€è¡Œè¯­å¥ï¼Œå°±æ˜¯ç»“æŸ generator çš„æŒ‡ä»¤ï¼Œ`for`å¾ªçŽ¯éšä¹‹ç»“æŸã€‚

è¯·æ³¨æ„åŒºåˆ†æ™®é€šå‡½æ•°å’Œ generator å‡½æ•°ï¼Œæ™®é€šå‡½æ•°è°ƒç”¨ç›´æŽ¥è¿”å›žç»“æžœï¼š

```python
&gt;&gt;&gt; r = abs(6)
&gt;&gt;&gt; r
6
```

generator å‡½æ•°çš„â€œè°ƒç”¨â€å®žé™…è¿”å›žä¸€ä¸ª generator å¯¹è±¡ï¼š

```python
&gt;&gt;&gt; g = fib(6)
&gt;&gt;&gt; g
&lt;generator object fib at 0x1022ef948&gt;
```

## 3.5 è¿­ä»£å™¨

æˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œå¯ä»¥ç›´æŽ¥ä½œç”¨äºŽ`for`å¾ªçŽ¯çš„æ•°æ®ç±»åž‹æœ‰ä»¥ä¸‹å‡ ç§ï¼š

ä¸€ç±»æ˜¯é›†åˆæ•°æ®ç±»åž‹ï¼Œå¦‚`list`ã€`tuple`ã€`dict`ã€`set`ã€`str`ç­‰ï¼›

ä¸€ç±»æ˜¯`generator`ï¼ŒåŒ…æ‹¬ç”Ÿæˆå™¨å’Œå¸¦`yield`çš„ generator functionã€‚

è¿™äº›å¯ä»¥ç›´æŽ¥ä½œç”¨äºŽ`for`å¾ªçŽ¯çš„å¯¹è±¡ç»Ÿç§°ä¸ºå¯è¿­ä»£å¯¹è±¡ï¼š`Iterable`ã€‚

å¯ä»¥ä½¿ç”¨`isinstance()`åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯`Iterable`å¯¹è±¡ï¼š

```python
&gt;&gt;&gt; from collections.abc import Iterable
&gt;&gt;&gt; isinstance([], Iterable)
True
&gt;&gt;&gt; isinstance({}, Iterable)
True
&gt;&gt;&gt; isinstance(&#39;abc&#39;, Iterable)
True
&gt;&gt;&gt; isinstance((x for x in range(10)), Iterable)
True
&gt;&gt;&gt; isinstance(100, Iterable)
False
```

è€Œç”Ÿæˆå™¨ä¸ä½†å¯ä»¥ä½œç”¨äºŽ`for`å¾ªçŽ¯ï¼Œè¿˜å¯ä»¥è¢«`next()`å‡½æ•°ä¸æ–­è°ƒç”¨å¹¶è¿”å›žä¸‹ä¸€ä¸ªå€¼ï¼Œç›´åˆ°æœ€åŽæŠ›å‡º`StopIteration`é”™è¯¯è¡¨ç¤ºæ— æ³•ç»§ç»­è¿”å›žä¸‹ä¸€ä¸ªå€¼äº†ã€‚

å¯ä»¥è¢«`next()`å‡½æ•°è°ƒç”¨å¹¶ä¸æ–­è¿”å›žä¸‹ä¸€ä¸ªå€¼çš„å¯¹è±¡ç§°ä¸ºè¿­ä»£å™¨ï¼š`Iterator`ã€‚

å¯ä»¥ä½¿ç”¨`isinstance()`åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯`Iterator`å¯¹è±¡ï¼š

```python
&gt;&gt;&gt; from collections.abc import Iterator
&gt;&gt;&gt; isinstance((x for x in range(10)), Iterator)
True
&gt;&gt;&gt; isinstance([], Iterator)
False
&gt;&gt;&gt; isinstance({}, Iterator)
False
&gt;&gt;&gt; isinstance(&#39;abc&#39;, Iterator)
False
```

ç”Ÿæˆå™¨éƒ½æ˜¯`Iterator`å¯¹è±¡ï¼Œä½†`list`ã€`dict`ã€`str`è™½ç„¶æ˜¯`Iterable`ï¼Œå´ä¸æ˜¯`Iterator`ã€‚

æŠŠ`list`ã€`dict`ã€`str`ç­‰`Iterable`å˜æˆ`Iterator`å¯ä»¥ä½¿ç”¨`iter()`å‡½æ•°ï¼š

```python
&gt;&gt;&gt; isinstance(iter([]), Iterator)
True
&gt;&gt;&gt; isinstance(iter(&#39;abc&#39;), Iterator)
True
```

ä½ å¯èƒ½ä¼šé—®ï¼Œä¸ºä»€ä¹ˆ`list`ã€`dict`ã€`str`ç­‰æ•°æ®ç±»åž‹ä¸æ˜¯`Iterator`ï¼Ÿ

è¿™æ˜¯å› ä¸º Python çš„`Iterator`å¯¹è±¡è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªæ•°æ®æµï¼ŒIterator å¯¹è±¡å¯ä»¥è¢«`next()`å‡½æ•°è°ƒç”¨å¹¶ä¸æ–­è¿”å›žä¸‹ä¸€ä¸ªæ•°æ®ï¼Œç›´åˆ°æ²¡æœ‰æ•°æ®æ—¶æŠ›å‡º`StopIteration`é”™è¯¯ã€‚å¯ä»¥æŠŠè¿™ä¸ªæ•°æ®æµçœ‹åšæ˜¯ä¸€ä¸ªæœ‰åºåºåˆ—ï¼Œä½†æˆ‘ä»¬å´ä¸èƒ½æå‰çŸ¥é“åºåˆ—çš„é•¿åº¦ï¼Œåªèƒ½ä¸æ–­é€šè¿‡`next()`å‡½æ•°å®žçŽ°æŒ‰éœ€è®¡ç®—ä¸‹ä¸€ä¸ªæ•°æ®ï¼Œæ‰€ä»¥`Iterator`çš„è®¡ç®—æ˜¯æƒ°æ€§çš„ï¼Œåªæœ‰åœ¨éœ€è¦è¿”å›žä¸‹ä¸€ä¸ªæ•°æ®æ—¶å®ƒæ‰ä¼šè®¡ç®—ã€‚

`Iterator`ç”šè‡³å¯ä»¥è¡¨ç¤ºä¸€ä¸ªæ— é™å¤§çš„æ•°æ®æµï¼Œä¾‹å¦‚å…¨ä½“è‡ªç„¶æ•°ã€‚è€Œä½¿ç”¨ list æ˜¯æ°¸è¿œä¸å¯èƒ½å­˜å‚¨å…¨ä½“è‡ªç„¶æ•°çš„ã€‚

&gt; å°ç»“ï¼š

å‡¡æ˜¯å¯ä½œç”¨äºŽ`for`å¾ªçŽ¯çš„å¯¹è±¡éƒ½æ˜¯`Iterable`ç±»åž‹ï¼›

å‡¡æ˜¯å¯ä½œç”¨äºŽ`next()`å‡½æ•°çš„å¯¹è±¡éƒ½æ˜¯`Iterator`ç±»åž‹ï¼Œå®ƒä»¬è¡¨ç¤ºä¸€ä¸ªæƒ°æ€§è®¡ç®—çš„åºåˆ—ï¼›

é›†åˆæ•°æ®ç±»åž‹å¦‚`list`ã€`dict`ã€`str`ç­‰æ˜¯`Iterable`ä½†ä¸æ˜¯`Iterator`ï¼Œä¸è¿‡å¯ä»¥é€šè¿‡`iter()`å‡½æ•°èŽ·å¾—ä¸€ä¸ª`Iterator`å¯¹è±¡ã€‚

Python çš„`for`å¾ªçŽ¯æœ¬è´¨ä¸Šå°±æ˜¯é€šè¿‡ä¸æ–­è°ƒç”¨`next()`å‡½æ•°å®žçŽ°çš„ï¼Œä¾‹å¦‚ï¼š

```python
for x in [1, 2, 3, 4, 5]:
    pass
```

å®žé™…ä¸Šå®Œå…¨ç­‰ä»·äºŽï¼š

```python
# é¦–å…ˆèŽ·å¾—Iteratorå¯¹è±¡:
it = iter([1, 2, 3, 4, 5])
# å¾ªçŽ¯:
while True:
    try:
        # èŽ·å¾—ä¸‹ä¸€ä¸ªå€¼:
        x = next(it)
    except StopIteration:
        # é‡åˆ°StopIterationå°±é€€å‡ºå¾ªçŽ¯
        break
```



## 3.6 å‚è€ƒèµ„æ–™

* [å»–é›ªå³° - Python 3.x - é«˜çº§ç‰¹æ€§](https://www.liaoxuefeng.com/wiki/1016959663602400/1017269809315232)
* [CS - WiKi](https://veal98.github.io/CS-Wiki/#/äººå·¥æ™ºèƒ½/Python/Pythonå…¥é—¨å­¦ä¹ ç¬”è®°/3-é«˜çº§ç‰¹æ€§)







---

> ä½œè€…:   
> URL: http://richfan.site/%E7%A8%8B%E6%8A%80/python/python%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/ch3-%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/  

